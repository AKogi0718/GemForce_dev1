<!-- app/views/users/show.html.erb -->
<div class="user-details-container">
  <h1>ユーザー情報</h1>

  <% if flash[:notice] %>
    <div class="alert alert-success">
      <%= flash[:notice] %>
    </div>
  <% end %>

  <div class="user-card">
    <div class="user-header">
      <div class="user-avatar">
        <%= @user.name[0].upcase %>
      </div>
      <div class="user-title">
        <h2><%= @user.name %></h2>
        <% if @user.system_admin? %>
          <span class="badge badge-danger">システム管理者</span>
        <% elsif @user.admin? %>
          <span class="badge badge-warning">管理者</span>
        <% else %>
          <span class="badge badge-info">担当者</span>
        <% end %>
      </div>
    </div>

    <div class="user-body">
      <div class="user-info">
        <h3>基本情報</h3>
        <table>
          <tr>
            <th>メールアドレス:</th>
            <td><%= @user.email %></td>
          </tr>
          <tr>
            <th>会社名:</th>
            <td><%= @user.company.name %></td>
          </tr>
          <tr>
            <th>会社ID:</th>
            <td><%= @user.company.company_id %></td>
          </tr>
        </table>
      </div>
    </div>

    <div class="user-actions">
      <% if @current_user.id == @user.id ||
            (@current_user.admin? && @current_user.company_id == @user.company_id) ||
            @current_user.system_admin? %>
        <%= link_to "編集", "/users/#{@user.id}/edit", class: "btn btn-primary" %>
      <% end %>

      <% if @current_user.admin? || @current_user.system_admin? %>
        <%= link_to "ユーザー一覧", "/users/index", class: "btn btn-info" %>
      <% end %>

      <%= link_to "戻る", :back, class: "btn btn-secondary" %>
    </div>
  </div>
</div>
